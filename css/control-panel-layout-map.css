/* ========================================
   CONTROL PANEL LAYOUT MAP (Grid Template Areas)
   Purpose: provide a single source of truth for section placement
   This file focuses ONLY on layout (positioning and sizing), leaving
   component styles to the other CSS files. Load this LAST.
   ======================================== */

:root {
  --gap: 12px;
}

/* NEW LAYOUT - Using cp-main-grid with proper priorities */
.cp-main-grid {
  display: grid !important;
  grid-template-columns: repeat(12, minmax(0, 1fr)) !important;
  grid-template-rows:
    minmax(420px, auto)         /* Row 1: triggers and visual effects/animation */
    minmax(420px, auto)         /* Row 2: continuation */
    minmax(120px, 180px)        /* Row 3: scene selector (minimal) */ !important;
  gap: var(--gap) !important;
  height: calc(100vh - 200px) !important;
  align-items: start !important;
  grid-template-areas:
    "trigger trigger trigger trigger trigger trigger visual visual visual animation animation animation"
    "trigger trigger trigger trigger trigger trigger visual visual visual animation animation animation"
    "scene scene scene scene scene scene scene scene scene scene scene scene" !important;
}

/* NEW Area assignments for reorganized panels */
.cp-panel--trigger-fx { grid-area: trigger !important; min-height: 420px; display: flex; flex-direction: column; }
.cp-panel--visual     { grid-area: visual !important; min-height: 420px; display: flex; flex-direction: column; }
.cp-panel--animation  { grid-area: animation !important; min-height: 420px; display: flex; flex-direction: column; }
.cp-panel--scene      { grid-area: scene !important; min-height: 120px; max-height: 180px; display: flex; flex-direction: column; overflow-y: auto; }

/* OLD Area assignments - DEPRECATED but kept for backwards compatibility */
.section--scenes    { grid-area: scene !important; }
.section--triggers  { grid-area: trigger !important; }
.section--animation { grid-area: animation !important; }
.section--ve-layers { grid-area: visual !important; }

/* Internal scrolling where appropriate */
.scene-control .scene-grid { flex: 1; overflow: auto; padding-right: 4px; }
.section--ve-layers .ve-layout { display: grid; grid-template-columns: 2.5fr 1.5fr; gap: var(--gap); height: 100%; min-height: 0; align-items: start; }
.animation-triggers .trigger-control-grid { flex: 1; overflow: auto; }
.section--triggers .trigger-grid { grid-template-columns: repeat(5, 1fr) !important; gap: 10px !important; flex: 1; overflow: auto; padding-right: 4px; }
.section--triggers .trigger-btn { min-height: 46px; font-size: 10px; padding: 8px; }
.section--tempo .slider-container { grid-template-columns: 80px 1fr 40px !important; }

/* Ensure sections donâ€™t force the grid to overflow */
.control-section.section { height: 100%; min-height: 0 !important; overflow: hidden; }

/* Header height remains predictable */
.matrix-header { min-height: 150px !important; }

/* Slightly tighter gaps on narrower widths */
@media (max-width: 1700px) {
  .control-grid { gap: 10px !important; }
}

/* Keep header height predictable to support the above height calc */
.matrix-header { min-height: 150px !important; }

/* Optional: smaller gutters at slightly narrower widths */
@media (max-width: 1700px) {
  :root { --gutter: 10px; --colA: 270px; --colB: 340px; --colC: 340px; }
}
